(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./src/documents/Hook/Hook-Sqoop.md":function(e,o,t){"use strict";t.r(o),t.d(o,"default",function(){return s});var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),n=(t("./node_modules/react/index.js"),t("./node_modules/@mdx-js/react/dist/index.es.js")),l={},p="wrapper";function s(e){var o=e.components,t=Object(a.a)(e,["components"]);return Object(n.b)(p,Object.assign({},l,t,{components:o,mdxType:"MDXLayout"}),Object(n.b)("h1",{id:"apache-atlas-hook-for-apache-sqoop"},"Apache Atlas Hook for Apache Sqoop"),Object(n.b)("h2",{id:"sqoop-model"},"Sqoop Model"),Object(n.b)("p",null,"Sqoop model includes the following types:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Entity types:"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"sqoop_process",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"super-types: Process"),Object(n.b)("li",{parentName:"ul"},"attributes: qualifiedName, name, description, owner, inputs, outputs, operation, commandlineOpts, startTime, endTime, userName"))),Object(n.b)("li",{parentName:"ul"},"sqoop_dbdatastore",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"super-types: !DataSet"),Object(n.b)("li",{parentName:"ul"},"attributes: qualifiedName, name, description, owner, dbStoreType, storeUse, storeUri, source"))))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Enum types:"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"sqoop_operation_type",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"values: IMPORT, EXPORT, EVAL"))),Object(n.b)("li",{parentName:"ul"},"sqoop_dbstore_usage",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"values: TABLE, QUERY, PROCEDURE, OTHER")))))),Object(n.b)("p",null,"Sqoop entities are created and de-duped in Atlas using unique attribute qualifiedName, whose value should be formatted as detailed below."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"   sqoop_process.qualifiedName:     sqoop <operation> --connect <url> {[--table <tableName>] || [--database <databaseName>]} [--query <storeQuery>]\n   sqoop_dbdatastore.qualifiedName: <storeType> --url <storeUri> {[--table <tableName>] || [--database <databaseName>]} [--query <storeQuery>]  --hive-<operation> --hive-database <databaseName> [--hive-table <tableName>] --hive-cluster <clusterName>\n")),Object(n.b)("h2",{id:"sqoop-hook"},"Sqoop Hook"),Object(n.b)("p",null,"Sqoop added a !SqoopJobDataPublisher that publishes data to Atlas after completion of import Job. Today, only hiveImport is supported in !SqoopHook.\nThis is used to add entities in Atlas using the model detailed above."),Object(n.b)("p",null,"Follow the instructions below to setup Atlas hook in Hive:"),Object(n.b)("p",null,"Add the following properties to  to enable Atlas hook in Sqoop:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Set-up Atlas hook in ",Object(n.b)("inlineCode",{parentName:"p"},"<sqoop-conf>"),"/sqoop-site.xml by adding the following:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"})," <property>\n   <name>sqoop.job.data.publish.class</name>\n   <value>org.apache.atlas.sqoop.hook.SqoopHook</value>\n </property>\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"untar apache-atlas-${project.version}-sqoop-hook.tar.gz")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"cd apache-atlas-sqoop-hook-${project.version}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Copy entire contents of folder apache-atlas-sqoop-hook-${project.version}/hook/sqoop to ",Object(n.b)("inlineCode",{parentName:"p"},"<atlas package>"),"/hook/sqoop")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Copy ",Object(n.b)("inlineCode",{parentName:"p"},"<atlas-conf>"),"/atlas-application.properties to to the sqoop conf directory ",Object(n.b)("inlineCode",{parentName:"p"},"<sqoop-conf>"),"/")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Link ",Object(n.b)("inlineCode",{parentName:"p"},"<atlas package>"),"/hook/sqoop/*.jar in sqoop lib"))),Object(n.b)("p",null,"The following properties in atlas-application.properties control the thread pool and notification details:"),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"atlas.hook.sqoop.synchronous=false # whether to run the hook synchronously. false recommended to avoid delays in Sqoop operation completion. Default: false\natlas.hook.sqoop.numRetries=3      # number of retries for notification failure. Default: 3\natlas.hook.sqoop.queueSize=10000   # queue size for the threadpool. Default: 10000\n\natlas.cluster.name=primary # clusterName to use in qualifiedName of entities. Default: primary\n\natlas.kafka.zookeeper.connect=                    # Zookeeper connect URL for Kafka. Example: localhost:2181\natlas.kafka.zookeeper.connection.timeout.ms=30000 # Zookeeper connection timeout. Default: 30000\natlas.kafka.zookeeper.session.timeout.ms=60000    # Zookeeper session timeout. Default: 60000\natlas.kafka.zookeeper.sync.time.ms=20             # Zookeeper sync time. Default: 20\n")),Object(n.b)("p",null,'Other configurations for Kafka notification producer can be specified by prefixing the configuration name with "atlas.kafka.". For list of configuration supported by Kafka producer, please refer to ',Object(n.b)("a",Object.assign({parentName:"p"},{href:"http://kafka.apache.org/documentation/#producerconfigs"}),"Kafka Producer Configs")),Object(n.b)("h2",{id:"notes"},"NOTES"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Only the following sqoop operations are captured by sqoop hook currently",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"hiveImport")))))}s&&s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/documents/Hook/Hook-Sqoop.md"}}),s.isMDXComponent=!0}}]);
//# sourceMappingURL=documents-hook-hook-sqoop.53f519f569f74d04a564.js.map